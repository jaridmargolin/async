!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).Async={})}(this,(function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?o(t):e}var f,l=function(){function t(i){e(this,t),r(this,"_promise",void 0),this._promise=new Promise(i)}return n(t,[{key:"then",value:function(){var t;return(t=this._promise).then.apply(t,arguments)}},{key:"catch",value:function(){var t;return(t=this._promise).catch.apply(t,arguments)}},{key:"finally",value:function(){var t;return(t=this._promise).finally.apply(t,arguments)}}]),t}(),h=function(t){function i(){var t;e(this,i);var n=function(){},s=function(){};return r(o(t=c(this,u(i).call(this,(function(t,e){n=t,s=e})))),"_resolve",void 0),r(o(t),"_reject",void 0),t._resolve=n,t._reject=s,t}return s(i,t),n(i,[{key:"resolve",value:function(){this._resolve.apply(this,arguments)}},{key:"reject",value:function(){this._reject.apply(this,arguments)}}]),i}(l);(f=t.TimerStatus||(t.TimerStatus={}))[f.READY=0]="READY",f[f.STARTED=1]="STARTED",f[f.PAUSED=2]="PAUSED",f[f.STOPPED=3]="STOPPED",f[f.COMPLETED=4]="COMPLETED";var _=function(i){function a(i){var n;e(this,a);var s=function(){},f=function(){};return r(o(n=c(this,u(a).call(this,(function(t,e){s=t,f=e})))),"_state",void 0),r(o(n),"_resolve",void 0),r(o(n),"_reject",void 0),n._resolve=s,n._reject=f,n._state={status:t.TimerStatus.READY,duration:i},n}return s(a,i),n(a,null,[{key:"create",value:function(t){return new a(t)}}]),n(a,[{key:"set",value:function(e){return this._state.status===t.TimerStatus.STARTED&&(this.pause(),Object.assign(this._state,{duration:e}),this.start()),this._state.status!==t.TimerStatus.READY&&this._state.status!==t.TimerStatus.PAUSED||Object.assign(this._state,{duration:e}),this}},{key:"start",value:function(){var e=this;return this._state.status!==t.TimerStatus.READY&&this._state.status!==t.TimerStatus.PAUSED||(this._state={status:t.TimerStatus.STARTED,start:Date.now(),duration:this._state.duration,timeout:setTimeout((function(){e._state={status:t.TimerStatus.COMPLETED,duration:null},e._resolve()}),this._state.duration)}),this}},{key:"pause",value:function(){if(this._state.status===t.TimerStatus.STARTED){var e=Date.now()-this._state.start;clearTimeout(this._state.timeout),this._state={status:t.TimerStatus.PAUSED,duration:this._state.duration-e}}return this}},{key:"stop",value:function(e){return this._state.status===t.TimerStatus.STARTED&&clearTimeout(this._state.timeout),this._state={status:t.TimerStatus.STOPPED,duration:null},e&&this._reject(e),this}}]),a}(l);t.Deferred=h,t.Promise=l,t.Timer=_,Object.defineProperty(t,"__esModule",{value:!0})}));
